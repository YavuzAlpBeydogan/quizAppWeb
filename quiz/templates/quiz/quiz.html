<h2>{{ language.name }} Quiz</h2>
<h2>Soru {{ question_number }} / {{ total_questions }}</h2>

<div id="timer" style="font-size: 24px; color: red; margin-bottom: 10px;">
  Süre: <span id="time">5</span> saniye
</div>

<form method="POST">
  {% csrf_token %}

  <div>
    <p>{{ question.text }}</p>
    <input type="radio" name="option" value="{{ question.option1 }}"> {{ question.option1 }}<br>
    <input type="radio" name="option" value="{{ question.option2 }}"> {{ question.option2 }}<br>
    <input type="radio" name="option" value="{{ question.option3 }}"> {{ question.option3 }}<br>
    <input type="radio" name="option" value="{{ question.option4 }}"> {{ question.option4 }}<br>
  </div>
  <hr>
  <input type="hidden" name="question_id" value="{{ question.id }}">
  <input type="hidden" name="next_q" value="{{ next_q }}">

  <button type="submit">Gönder</button>
</form>

<script>
  let timeLeft = 5;
  const timerDisplay = document.getElementById('time');
  const form = document.querySelector('form');

  const countdown = setInterval(() => {
    timeLeft--;
    timerDisplay.textContent = timeLeft;

    if (timeLeft <= 0) {
      clearInterval(countdown);
      form.submit(); // ⏱️ Süre bitince otomatik gönder
    }
  }, 1000);
</script>

<style>
  #timer {
    font-weight: bold;
    background-color: #fff8e1;
    padding: 10px;
    border: 2px solid #ffa726;
    border-radius: 8px;
    margin-bottom: 15px;
    display: inline-block;
  }
</style>
